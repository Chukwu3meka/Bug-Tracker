<div class="bug-details" *ngIf="!!bugData">
  <div>
    <span
      nz-icon
      nzType="close-circle"
      nzTheme="outline"
      (click)="hideDrawer()"
    ></span>
  </div>

  <div>
    <h1>{{ details.title }}</h1>
    <span>.</span>
    <p>{{ details.platform }}</p>
  </div>

  <p>{{ details.description }}</p>

  <ul>
    <li *ngFor="let data of details.screenshots">
      <img [src]="data" alt="bug screenshot" (click)="zoomImagehandler(data)" />
    </li>
  </ul>

  <div class="dashedTitleWhite">
    <h1 nz-typography>Bug Activities</h1>
  </div>

  <nz-table
    #smallTable
    nzSize="small"
    [nzData]="activities"
    [nzFrontPagination]="false"
  >
    <thead>
      <tr>
        <th>Date</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of activities">
        <td [width]="'200px'">{{ data.date }}</td>
        <td>{{ data.description }}</td>
      </tr>
    </tbody>
  </nz-table>

  <!-- display this only if user is admin -->
  <div>
    <!-- "severity": [
      { "name": "Low", "id": "low" },
      { "name": "Normal", "id": "normal" },
      { "name": "High", "id": "high" }
    ],
     -->
    <!-- nzSize="small" -->
    <nz-select
      [nzAllowClear]="false"
      id="developer"
      ngModel="developer"
      [(ngModel)]="details.developer.id"
      nzPlaceHolder="Assign Dveloper"
    >
      <nz-option
        *ngFor="let developer of details.platformDevelopers"
        [nzDisabled]="details.developer.id === developer.id"
        [nzValue]="developer.id"
        [nzLabel]="developer.name"
      ></nz-option>
    </nz-select>

    <button
      nz-button
      nzType="primary"
      [disabled]="details.developer.id === currentDeveloper"
      (click)="assignDeveloper()"
    >
      <!-- [nzLoading]="isLoadingOne" -->
      Assign developer & Update severity
    </button>
  </div>

  <div
    *ngIf="zoomImage"
    class="zoomImage"
    (click)="zoomImagehandler(undefined)"
  >
    <span
      nz-icon
      nzType="close-circle"
      nzTheme="outline"
      (click)="zoomImagehandler(undefined)"
    ></span>

    <img [src]="zoomImage" alt="zoomed image" />
  </div>
</div>

<div *ngIf="!bugData">loading...</div>
